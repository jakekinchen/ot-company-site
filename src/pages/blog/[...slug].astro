---
import { getCollection, CollectionEntry } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';

type BlogPostType = CollectionEntry<'blog'>;

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

export async function get({ params }) {
  const post = (await getCollection('blog')).find(p => p.slug === params.slug);
  return {
    props: { post },
  };
}
---

<BlogPost {...post.data} />